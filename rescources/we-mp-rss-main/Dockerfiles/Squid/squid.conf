# Squid 基本配置
http_port 3128

# 启用 HTTPS 代理支持
https_port 3129 cert=/etc/squid/ssl/squid.pem key=/etc/squid/ssl/squid.key

# 缓存设置
cache_dir ufs /var/cache/squid 100 16 256

# 访问控制
acl localnet src 0.0.0.1-0.255.255.255
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 443
acl CONNECT method CONNECT

# 允许管理界面访问
acl manager proto cache_object
http_access allow manager localhost
http_access deny manager

# 默认拒绝所有，然后允许安全端口
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localnet
http_access allow localhost
http_access deny all

# 启用 cachemgr.cgi 管理界面
cachemgr_passwd none all
